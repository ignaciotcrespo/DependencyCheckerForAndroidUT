DependencyCheckerForAndroidUT
=============================

Tool to run only the relevant UT based on the changes between two git branches

The problem:

Running UT in android is slow, this is a problem when working with CI. 
This tool analyzes all classes in a folder (and subfolders, a complete compiled repository or project)
and creates a class file (DependencySuite.class) with a TestSuite to run only the tests relevant to 
the changes made between two branches.

Usage:

1- Compile the project and generate a jar file (e.g. dep.jar)

2- This projects works with the output generated by git diff command.

- git diff --name-status BRANCH1..BRANCH2 | grep .java | java -jar dep.jar REPOSITORY_FOLDER TEST_PROJECT_CLASSES_FOLDER

be sure "color" is not enabled by default in your git config.

- BRANCH1, BRANCH2: the name of the branches to compare
- REPOSITORY_FOLDER: the folder of the repository
- TEST_PROJECT_CLASSES_FOLDER: the folder where the new class DependencySuite.class will be saved

3- Run the instrumentation command with the option "-e class DependencySuite"
e.g.: adb shell am instrument -w -e class DependencySuite com.android.foo/android.test.InstrumentationTestRunner

A good place to run this tool is in the target "-post-compile" of the test project, due to in this stage all the
java files in the project and the test project were compiled.

Known issues/limitations:
- to recognize a test it checks the class finishes with "Test"
- hardcoded, the following packages and subpackages are ignored: "java", "android", "com", "org"
