UTDependencyChecker
===================

Tool to run only the relevant UT based on the changes between two git branches

The problem:

Running UT in android is slow, this is a problem when working with CI. 
This tool analyzes all classes in a folder (and subfolders, a complete compiled repository or project)
and creates a class file (DependencySuite.class) with a TestSuite to run only the tests relevant to 
the changes made between two branches.

Usage:

1- Compile the project and generate a jar file (e.g. dep.jar)

2- The input of this program is the output generated by "git log" command:

- git log --name-only --pretty=%n BRANCH_MASTER..BRANCH_WITH_CHANGES | java -jar dep.jar REPOSITORY_FOLDER TEST_PROJECT_CLASSES_FOLDER

be sure "color" is not enabled by default in your git config.

- BRANCH_MASTER: the master branch to compare with
- BRANCH_WITH_CHANGES: the branch with the new changes, the tests will be searched based on the changes in this branch
- REPOSITORY_FOLDER: the root folder of the repository to read the modified .java files. If not set uses current folder.
- TEST_PROJECT_CLASSES_FOLDER: the folder where the new class DependencySuite.class will be saved. If not set uses current folder.

3- Run the instrumentation command with the option "-e class DependencySuite"
e.g.: adb shell am instrument -w -e class DependencySuite com.android.foo/android.test.InstrumentationTestRunner

A good place to run this tool is in the target "-post-compile" of the test project, due to in this stage all the
java files in the project and the test project were compiled.

Known issues/limitations:
- to recognize a test it checks the class is not abstract, has at least one method annotated with @Test, or at least one method named "testXXX"
- hardcoded, the following packages and subpackages are ignored: "java", "android", "com", "org"
